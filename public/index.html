<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Supermarket Monitor</title>
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:24px;color:#111}
      h1{margin:0 0 12px}
      button{font:inherit;padding:8px 14px}
      code{background:#f2f2f2;padding:2px 4px;border-radius:4px}
    </style>
  </head>
  <body>
    <h1>Supermarket Monitor</h1>
    <p>This deployment exposes a scheduled function at <code>/api/run</code>.</p>
    <p>
      <button id="run">Run job now</button>
      <span id="status"></span>
    </p>
    <script>
      document.getElementById('run').addEventListener('click', async () => {
        const s = document.getElementById('status');
        s.textContent = 'Running...';
        try {
          const r = await fetch('/api/run');
          const j = await r.json().catch(()=>({}));
          s.textContent = r.ok ? 'Done' : ('Error: '+(j.error||r.status));
        } catch (e) {
          s.textContent = 'Error: '+e.message;
        }
      });
    </script>
  </body>
  </html>


